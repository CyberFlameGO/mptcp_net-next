From: Florian Westphal <fw@strlen.de>
Subject: [PATCH] mptcp: add wmem_queued accounting

Peer could ack data at TCP level but refrain from sending mptcp-level ACKs.
This could result in a growing the mptcp socket backlog indefinitely.

We should thus block mptcp_sendmsg until the peer has acked some of the
sent data.

In order to be able to do so, increment the mptcp socket wmem_queued
counter on memory allocation and decrement it when releasing the memory
on mptcp-level ack reception.

Because TCP performns sndbuf auto-tuning up to tcp_wmem_max[2], make
this the mptcp sk_sndbuf limit.

In the future we could add experiment with autotuning as TCP does in
tcp_sndbuf_expand().

Signed-off-by: Florian Westphal <fw@strlen.de>
