From: Florian Westphal <fw@strlen.de>
Subject: [PATCH] make accept not allocate kernel socket struct

Once lower-level accept returns, walk the subflow list (there should
be one subflow) and make sk->sk_socket point to the new mptcp socket.

This is needed to make NOSPACE flag work: tcp stack can't signal
availability of new data unless ->sk_socket points to a "struct socket".

If sk_socket is NULL, then from TCP stack p.o.v.  the socket has been
detached from the userspace program already, so nothing to wake up in
first place.

mptcp_close needs to handle both cases: connect()ing sockets have a
'struct socket' allocated, while incoming ones do not.

v2: clarify sk_prot == &mptcp_prot || is_mptcp_v6(newsock) construct,
    prefer a '!= tcp_prot' here.
    Add and use helper for subflow closing and add comment as to
    why incoming/outgoing ssk get different treatment.

Signed-off-by: Florian Westphal <fw@strlen.de>
